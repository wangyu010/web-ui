(function(t){function e(e){for(var s,o,c=e[0],r=e[1],u=e[2],d=0,p=[];d<c.length;d++)o=c[d],a[o]&&p.push(a[o][0]),a[o]=0;for(s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s]);l&&l(e);while(p.length)p.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],s=!0,c=1;c<n.length;c++){var r=n[c];0!==a[r]&&(s=!1)}s&&(i.splice(e--,1),t=o(o.s=n[0]))}return t}var s={},a={app:0},i=[];function o(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=s,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(n,s,function(e){return t[e]}.bind(null,s));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],r=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var l=r;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"02ab":function(t,e,n){},"0af1":function(t,e,n){},"0d02":function(t,e,n){},"39df":function(t,e){t.exports="data:image/png;base64,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"},"3a1a":function(t,e,n){"use strict";var s=n("490a"),a=n.n(s);a.a},"490a":function(t,e,n){},"533f":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("097d");var s=n("2b0e"),a=n("0a89"),i=n.n(a),o=(n("357d"),n("77ed"),function(t,e){t.scrollTo?t.scrollTo({top:t.scrollHeight,behavior:e?"smooth":"instant"}):t.scrollTop=t.scrollHeight}),c={bind:function(t,e){var n=!1;t.addEventListener("scroll",function(){n=t.scrollTop+t.clientHeight+1<t.scrollHeight}),new MutationObserver(function(s){var a=e.value||{},i=!1===a.always&&n;i||1!==s[s.length-1].addedNodes.length||o(t,a.smooth)}).observe(t,{childList:!0})},inserted:o},r={install:function(t){t.directive("chat-scroll",c)}},u=r,l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},d=[],p={name:"App",metaInfo:{title:"web robot",htmlAttrs:{lang:"zh_CN"}}},f=p,h=(n("7faf"),n("2877")),g=Object(h["a"])(f,l,d,!1,null,null,null);g.options.__file="App.vue";var m=g.exports,v=n("8c4f"),b=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"chat-box animated fadeIn"},[s("div",{staticClass:"chat-box-header"},[s("div",{staticClass:"chat-header-title"},[s("img",{staticClass:"header-logo",attrs:{src:n("cf05")}}),s("span",{staticClass:"header-title",domProps:{textContent:t._s(t.title)}})]),s("div",{staticClass:"chat-box-toggle"})]),s("div",{staticClass:"chat-box-body"},[s("div",{staticClass:"chat-logs-container"},[s("div",{directives:[{name:"chat-scroll",rawName:"v-chat-scroll",value:{always:!0,smooth:!0},expression:"{always: true, smooth: true}"}],staticClass:"chat-logs"},t._l(t.messages,function(e){return s("div",{staticClass:"chat-msg animated fadeIn",class:e.responseId?"user":"self"},[s("div",{staticClass:"msg-avatar",class:{invisible:"faq"===e.type}},[e.responseId&&!t.product.avatar?s("img",{attrs:{src:n("ce08")}}):t._e(),e.responseId&&t.product.avatar?s("img",{attrs:{src:t.product.avatar}}):t._e(),e.responseId?t._e():s("img",{attrs:{src:n("39df")}}),e.responseId?s("span",{staticClass:"msg-sender"},[t._v(t._s(t.title))]):t._e(),e.responseId?t._e():s("span",{staticClass:"msg-sender"},[t._v("用户"+t._s(t.chat.name.slice(0,2)))])]),s("chat-message",{attrs:{message:e,clickLink:t.send},on:{"image-fullscreen":t.onImageFullscreen}})],1)})),t.showFeedback||t.showQuickInput?s("div",{staticClass:"extra-actions"},[t.showQuickInput?s("quick-input",{staticClass:"quick-input",attrs:{items:t.quickInputItems,onInput:t.handleQuickInput}}):t._e(),t.showFeedback?s("feedback-widget",{staticClass:"feedback-widget",attrs:{onUpVote:t.handleUpVote,onDownVote:t.handleDownVote,pending:t.feedbackPending,sent:t.feedbackSent}}):t._e()],1):t._e(),t.topics&&t.topics.length?s("div",{staticClass:"msg-prompt-container"},[s("ul",{staticClass:"msg-prompt-list"},t._l(t.topics,function(e,n){return s("li",{staticClass:"msg-prompt",class:{active:t.activeTopicId===e.id},attrs:{"data-topic-id":e.id,"data-index":n,"data-topic-title":e.title},on:{mouseenter:t.onMouseEnter,click:t.onTopicClick}},[t._v(t._s(e.title))])}))]):t._e(),s("form",{staticClass:"chat-input",class:{disabled:!t.inputActive}},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.input,expression:"input"}],ref:"input",attrs:{type:"text",placeholder:"请输入消息..."},domProps:{value:t.input},on:{keydown:[function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?(e.preventDefault(),t.onSubmit(e)):null},function(e){return"button"in e||!t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?(e.preventDefault(),t.onKeyUp(e)):null},function(e){return"button"in e||!t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?(e.preventDefault(),t.onKeyDown(e)):null}],input:function(e){e.target.composing||(t.input=e.target.value)}}}),s("button",{staticClass:"chat-submit",class:{disabled:t.submitDisabled},attrs:{type:"submit",disabled:t.submitDisabled},on:{click:function(e){return e.preventDefault(),t.onClick(e)}}},[t._v("发送")])])]),s("div",{staticClass:"chat-product"},[s("product",{attrs:{product:t.product}})],1)]),t.fullscreenImage?s("div",{staticClass:"full-screen-modal",on:{click:function(e){t.fullscreenImage=null}}},[s("div",{staticClass:"full-screen-close fa fa-fw fa-close"}),s("div",{staticClass:"full-screen-image-container"},[s("img",{staticClass:"full-screen-image",attrs:{src:t.fullscreenImage}})])]):t._e()])},I=[],C=(n("7f7f"),n("c93e")),A=n("f7fe"),w=n.n(A),x=n("2f62"),k=(n("f751"),{features:{feedback:!1,faqQuickInput:!1}}),_=Object.assign({},k,window.webRobotConfig||{}),y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"chat-message",class:{right:!t.message.responseId,failed:"failed"===t.message.status,faq:"faq"===t.message.type}},["txt"==t.message.type?n("div",{staticClass:"chat-message-text",domProps:{textContent:t._s(t.message.content)}}):t._e(),"html"==t.message.type?n("div",{staticClass:"chat-message-html",domProps:{innerHTML:t._s(t.toLinks(t.message.content))}}):t._e(),"faq"===t.message.type?n("div",{staticClass:"chat-message-faq"},[n("h4",[t._v("热门问题")]),n("ol",t._l(t.message.questions,function(e){return n("li",[n("a",{attrs:{href:"#"},domProps:{textContent:t._s(e.question)},on:{click:t.onClick}})])}))]):t._e()])},j=[];n("ac4d"),n("8a81"),n("ac6a"),n("4917"),n("a481"),n("02ab"),n("a8cd");function P(t){return(t||"").replace(/([^\S]|^)(((https?:\/\/)|(www\.))(\S+))/gi,function(t,e,n){var s=n;return s.match("^https?://")||(s="http://".concat(s)),"".concat(e,'<a href="').concat(s,'" target="_blank">').concat(n,"</a>")})}var F={props:{message:Object,clickLink:Function},mounted:function(){this.bindChoiceLinks(),this.bindImgZoomIn()},methods:{onClick:function(t){t.preventDefault(),this.clickLink(t.currentTarget.text)},onImgZoomIn:function(t){t.preventDefault(),this.$emit("image-fullscreen",t.target.src)},bindChoiceLinks:function(){var t=this.$el.querySelectorAll('a[data-type="choice"]'),e=!0,n=!1,s=void 0;try{for(var a,i=t[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){var o=a.value;o.addEventListener("click",this.onClick)}}catch(t){n=!0,s=t}finally{try{e||null==i.return||i.return()}finally{if(n)throw s}}},bindImgZoomIn:function(){var t=this,e=this.$el.querySelectorAll("figure > img");e.forEach(function(e){e.addEventListener("click",t.onImgZoomIn)})},toLinks:P}},M=F,Z=(n("3a1a"),Object(h["a"])(M,y,j,!1,null,"8b0a9cdc",null));Z.options.__file="ChatMessage.vue";var T=Z.exports,D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.sent?n("div",{staticClass:"feedback-done"},[n("span",[t._v("感谢您的反馈！")])]):n("div",{staticClass:"feedback"},[n("span",[t._v("您对本次会话是否满意：")]),n("button",{staticClass:"upvote",attrs:{type:"submit",disabled:t.pending},on:{click:function(e){return e.preventDefault(),t.onUpVote(e)}}},[n("heart",{staticClass:"icon heart"})],1),n("button",{staticClass:"downvote",attrs:{type:"submit",disabled:t.pending},on:{click:function(e){return e.preventDefault(),t.onDownVote(e)}}},[n("dislike",{staticClass:"icon down-vote"})],1)])},E=[],W=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{staticClass:"svg-inline--fa fa-heart fa-w-16",attrs:{"aria-hidden":"true","data-prefix":"fas","data-icon":"heart",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"}},[n("path",{attrs:{fill:"currentColor",d:"M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"}})])},q=[],G={},J=Object(h["a"])(G,W,q,!1,null,null,null);J.options.__file="Heart.vue";var O=J.exports,Q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{staticClass:"svg-inline--fa fa-thumbs-down fa-w-16",attrs:{"aria-hidden":"true","data-prefix":"fas","data-icon":"thumbs-down",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"}},[n("path",{attrs:{fill:"currentColor",d:"M0 56v240c0 13.255 10.745 24 24 24h80c13.255 0 24-10.745 24-24V56c0-13.255-10.745-24-24-24H24C10.745 32 0 42.745 0 56zm40 200c0-13.255 10.745-24 24-24s24 10.745 24 24-10.745 24-24 24-24-10.745-24-24zm272 256c-20.183 0-29.485-39.293-33.931-57.795-5.206-21.666-10.589-44.07-25.393-58.902-32.469-32.524-49.503-73.967-89.117-113.111a11.98 11.98 0 0 1-3.558-8.521V59.901c0-6.541 5.243-11.878 11.783-11.998 15.831-.29 36.694-9.079 52.651-16.178C256.189 17.598 295.709.017 343.995 0h2.844c42.777 0 93.363.413 113.774 29.737 8.392 12.057 10.446 27.034 6.148 44.632 16.312 17.053 25.063 48.863 16.382 74.757 17.544 23.432 19.143 56.132 9.308 79.469l.11.11c11.893 11.949 19.523 31.259 19.439 49.197-.156 30.352-26.157 58.098-59.553 58.098H350.723C358.03 364.34 384 388.132 384 430.548 384 504 336 512 312 512z"}})])},S=[],Y={},R=Object(h["a"])(Y,Q,S,!1,null,null,null);R.options.__file="Dislike.vue";var B=R.exports,N={props:{pending:Boolean,sent:Boolean,onUpVote:Function,onDownVote:Function},components:{Heart:O,Dislike:B}},U=N,H=U,L=(n("d4bd"),Object(h["a"])(H,D,E,!1,null,"53e2eac8",null));L.options.__file="FeedbackWidget.vue";var V=L.exports,K=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"product"},[n("div",{staticClass:"product__main"},[n("div",{staticClass:"product__avatar"},[n("img",{attrs:{src:t.product.avatar||t.logoPlaceholder}})]),n("div",{staticClass:"product__name",domProps:{textContent:t._s(t.product.name)}}),t.product.extra.slogan?n("div",{staticClass:"product__slogan",domProps:{textContent:t._s(t.product.extra.slogan)}}):t._e(),n("div",{staticClass:"product__contact"},[n("phone",{staticClass:"phone icon"}),n("span",[t._v("官方客服：")]),n("span",{staticClass:"product__phone"},[t._v("99999999 "+t._s(t.product.extra.phone))])],1)]),t.product.extra?n("div",{staticClass:"product__footer"},[n("ul",{staticClass:"product__links"},t._l(t.product.extra.links,function(e){return n("li",{staticClass:"product__link"},[n("a",{attrs:{href:e.href,target:"_blank"},domProps:{textContent:t._s(e.title)}})])})),n("div",{staticClass:"product__qrcode"},[n("img",{attrs:{src:t.product.extra.qr}})])]):t._e(),t.product.extra?t._e():n("div",{staticClass:"product__footer"},[n("ul",{staticClass:"product__links"},t._l(t.ein.links,function(e){return n("li",{staticClass:"product__link"},[n("a",{attrs:{href:e.href,target:"_blank"},domProps:{textContent:t._s(e.title)}})])})),n("div",{staticClass:"product__qrcode"},[n("img",{attrs:{src:t.ein.qr}})])])])},z=[],X=n("62e5"),$=n.n(X),tt=n("8aed"),et=n.n(tt),nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{staticStyle:{"enable-background":"new 0 0 485.213 485.212"},attrs:{version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"485.213px",height:"485.212px",viewBox:"0 0 485.213 485.212","xml:space":"preserve"}},[n("g",[n("path",{attrs:{d:"M242.607,0C108.629,0,0.001,108.628,0.001,242.606c0, 133.976,108.628,242.606,242.606,242.606 c133.978,0,242.604-108.631,242.604-242.606C485.212,108.628,376.585,0, 242.607,0z M370.719,353.989l-19.425,19.429 c-3.468,3.463-13.623,5.624-13.949,5.624c-61.452, 0.536-120.621-23.602-164.095-67.08c-43.593-43.618-67.759-102.998-67.11-164.657 c0-0.028,2.224-9.892,5.689-13.324l19.424-19.427c7.108-7.141, 20.762-10.368,30.327-7.168l4.086,1.363 c9.537,3.197,19.55,13.742,22.185,23.457l9.771, 35.862c2.635,9.743-0.919,23.604-8.025,30.712l-12.97,12.972 c12.734,47.142,49.723,84.138,96.873,96.903l12.965-12.975c7.141-7.141, 20.997-10.692,30.719-8.061l35.857,9.806 c9.717,2.67,20.26,12.62,23.456,22.154l1.363,4.145C381.028, 333.262,377.826,346.913,370.719,353.989z"}})])])},st=[],at={},it=Object(h["a"])(at,nt,st,!1,null,null,null);it.options.__file="Phone.vue";var ot=it.exports,ct={props:{product:Object},data:function(){return{ein:{links:[{title:"爱因官网",href:"https://www.einplus.cn/"}],qr:$.a},logoPlaceholder:et.a}},components:{Phone:ot}},rt=ct,ut=(n("bde0"),Object(h["a"])(rt,K,z,!1,null,"3dfb99f2",null));ut.options.__file="Product.vue";var lt=ut.exports,dt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"quick-input"},[n("span",[t._v("您可能想问：")]),t._l(t.items,function(e){return n("a",{staticClass:"item",attrs:{href:"#","data-item":e},on:{click:function(e){return e.preventDefault(),t.onClick(e)}}},[t._v(t._s(e))])})],2)},pt=[],ft={props:{items:Array,onInput:Function},methods:{onClick:function(t){var e=t.currentTarget.dataset.item;this.onInput(e)}}},ht=ft,gt=ht,mt=(n("ea84"),Object(h["a"])(gt,dt,pt,!1,null,"551c9339",null));mt.options.__file="QuickInput.vue";var vt=mt.exports,bt={data:function(){return{input:"",fullscreenImage:null,headerImg:"",activeIndex:null,activeTopicId:null}},computed:Object(C["a"])({},Object(x["c"])("chat",["messages","product","title","messagePending","inputActive","chat","feedbackPending","feedbackSent","topics"]),Object(x["c"])("faq",{hotQuestions:"questions",hotWords:"words"}),{features:function(){return _.features},showFeedback:function(){var t=this.features,e=this.lastResponse;return t.feedback&&e},showQuickInput:function(){var t=this.features,e=this.quickInputItems;return t.faqQuickInput&&e.length>0},lastResponse:function(){for(var t=this.messages.length-1;t>=0;t-=1){var e=this.messages[t];if(e.responseId&&e.relatedMessage)return e}return null},quickInputItems:function(){return this.hotWords},productId:function(){return this.$route.params.id},submitDisabled:function(){return!this.input||!!this.messagePending}}),created:function(){function t(t){t?(this.getRelatedTopics({productId:this.productId,msg:t}),this.activeIndex=null,this.activeTopicId=null):this.resetTopics()}this.debouncedWatchInput=w()(t,500);var e=this.productId;this.getMetaData(e),this.fetchFAQ(e)},methods:Object(C["a"])({},Object(x["b"])("chat",["sendMessage","getMetaData","judge","getRelatedTopics"]),Object(x["b"])("faq",{fetchFAQ:"fetchData"}),{send:function(t){var e=t.trim();e&&(this.sendMessage({productId:this.productId,message:e}),this.input="")},sendJudgement:function(t){var e=this.lastResponse;this.judge({productId:this.productId,chatId:this.chat.id,chatName:this.chat.name,relatedMessage:e.relatedMessage,relatedResponse:e.responseId,judgement:t})},handleQuickInput:function(t){this.send(t)},handleUpVote:function(){this.sendJudgement("survey.satisfaction.high")},handleDownVote:function(){this.sendJudgement("survey.satisfaction.low")},onImageFullscreen:function(t){this.fullscreenImage=t},onKeyUp:function(){null===this.activeIndex||0===this.activeIndex?this.activeIndex=this.topics.length-1:this.activeIndex-=1,this.activeTopicId=this.topics[this.activeIndex].id},onKeyDown:function(){null===this.activeIndex||this.activeIndex===this.topics.length-1?this.activeIndex=0:this.activeIndex+=1,this.activeTopicId=this.topics[this.activeIndex].id},onMouseEnter:function(t){var e=t.target.dataset,n=e.topicId,s=e.index;this.activeTopicId=parseInt(n,10),this.activeIndex=parseInt(s,10)},onTopicClick:function(t){var e=t.target.dataset.topicTitle;console.log(t,e),this.input=e},onSubmit:function(){this.activeTopicId?this.input=this.topics[this.activeIndex].title:this.send(this.input),this.resetTopics()},onClick:function(){this.send(this.input)},resetTopics:function(){this.activeIndex=null,this.activeTopicId=null,this.$store.commit("chat/resetTopics")}}),watch:{inputActive:function(t){!1===t&&(this.input="")},input:function(t){this.debouncedWatchInput(t)}},components:{ChatMessage:T,FeedbackWidget:V,Product:lt,QuickInput:vt},metaInfo:function(){var t=this.product?this.product.name:void 0,e=t?"".concat(t," - web robot"):"web robot";return{title:e}}},It=bt,Ct=(n("a5f4"),Object(h["a"])(It,b,I,!1,null,"7d1177fc",null));Ct.options.__file="Home.vue";var At=Ct.exports;s["a"].use(v["a"]);var wt=new v["a"]({mode:"history",routes:[{path:"/:id",name:"ProductChat",component:At}]}),xt=(n("456d"),n("bc3a")),kt=n.n(xt),_t={title:"客服机器人",product:{name:void 0,avatar:void 0,extra:{}},chat:{id:void 0,name:void 0},messages:[],messagePending:!1,inputActive:!0,feedbackPending:!1,feedbackSent:!1,topics:[]},yt={sendMessage:function(t,e){var n=t.commit,s=t.state,a=e.productId,i=e.message;n("toggleInput",!1);var o=new Date,c={content:i,type:"txt",createAt:o,status:"pending"};n("addMessage",c);var r=s.chat,u={chat:r,content:{type:"txt",body:i},posted_at:o.toISOString()};kt.a.post("/api/messages/".concat(a),u).then(function(t){var e=t.data;n("addMessage",{content:e.content.body,type:e.content.type,relatedMessage:e.related_message,createAt:e.create_at,responseId:e.response_id}),n("setMessageState",{message:c,status:"success"}),n("toggleInput",!0)}).catch(function(){n("setMessageState",{message:c,status:"failed"}),n("toggleInput",!0)})},getMetaData:function(t,e){var n=t.commit;kt.a.post("/api/chats",{product_id:e}).then(function(t){var e=t.data;n("setProduct",e.bot),n("setChat",e.chat),n("addMessage",{content:e.bot.greeting,type:"html",responseId:"fake"}),n("toggleInput",!0)})},judge:function(t,e){var n=t.commit,s=e.productId,a=e.chatId,i=e.chatName,o=e.relatedMessage,c=e.relatedResponse,r=e.judgement,u={chat:{id:a,name:i},related_message:o,related_response:c,content:{type:"txt",body:r},posted_at:(new Date).toISOString()};n("judgementStarting"),kt.a.post("/api/training/".concat(s),u).then(function(){n("judgementFinished")})},getRelatedTopics:function(t,e){var n=t.commit,s=e.productId,a=e.msg;n("fetchTopicsPending"),kt.a.get("/suggest/?limit=5&page=1&product_id=".concat(s,"&words_match=and&question=").concat(a)).then(function(t){var e=t.data,s=Object.keys(e["topics"]).length,a=[];if(s>0)for(var i=0;i<s;i+=1){var o=e["topics"][i]["rounds"][0]["questions"][0]["content"],c=e["topics"][i]["rounds"][0]["questions"][0]["id"],r={title:o,id:c};a.push(r)}n("fetchTopicsComplete",a)}).catch(function(){n("fetchTopicsError")})}},jt={addMessage:function(t,e){t.messages.push(e)},setMessageState:function(t,e){var n=e.message,s=e.status;n.status=s},toggleInput:function(t,e){t.inputActive=e},toggleMessagePending:function(t,e){t.messagePending=e},setProduct:function(t,e){t.product=Object(C["a"])({},e)},setChat:function(t,e){t.chat=Object(C["a"])({},e)},judgementStarting:function(t){t.feedbackPending=!0},judgementFinished:function(t){t.feedbackPending=!1,t.feedbackSent=!0},fetchTopicsPending:function(){},fetchTopicsComplete:function(t,e){t.topics=e},fetchTopicsError:function(t){},resetTopics:function(t){t.topics=[]}},Pt={namespaced:!0,state:_t,actions:yt,mutations:jt},Ft={pending:!1,questions:[],words:[]},Mt={fetchData:function(t,e){var n=t.commit;n("fetchPending"),kt.a.get("/api/stats/".concat(e)).then(function(t){var e=t.data;n("fetchComplete",e),_.features.faqQuickInput&&e.hot_faq&&e.hot_faq.length&&n("chat/addMessage",{questions:e.hot_faq,type:"faq",responseId:"fake"},{root:!0})}).catch(function(t){console.error("failed to fetch faq data:",t),n("fetchComplete",{})})}},Zt={fetchPending:function(t){t.pending=!0},fetchComplete:function(t,e){var n=e.hotwords;n&&(t.words=n.map(function(t){var e=t.word;return e})),t.pending=!1}},Tt={namespaced:!0,state:Ft,actions:Mt,mutations:Zt};s["a"].use(x["a"]);var Dt=new x["a"].Store({modules:{chat:Pt,faq:Tt},strict:!1});s["a"].config.productionTip=!1,s["a"].use(u),s["a"].use(i.a),new s["a"]({router:wt,store:Dt,render:function(t){return t(m)}}).$mount("#app")},"62e5":function(t,e,n){t.exports=n.p+"img/qrcode.bd700b3b.jpg"},"6eec":function(t,e,n){},"7faf":function(t,e,n){"use strict";var s=n("0af1"),a=n.n(s);a.a},"8aed":function(t,e,n){t.exports=n.p+"img/logo-placeholder.29268340.svg"},"9d25":function(t,e,n){},a5f4:function(t,e,n){"use strict";var s=n("6eec"),a=n.n(s);a.a},a8cd:function(t,e,n){},bde0:function(t,e,n){"use strict";var s=n("9d25"),a=n.n(s);a.a},ce08:function(t,e,n){t.exports=n.p+"img/ein-bot.050e126d.png"},cf05:function(t,e,n){t.exports=n.p+"img/logo.f4dbde38.png"},d4bd:function(t,e,n){"use strict";var s=n("0d02"),a=n.n(s);a.a},ea84:function(t,e,n){"use strict";var s=n("533f"),a=n.n(s);a.a}});
//# sourceMappingURL=app.73da6e7a.js.map